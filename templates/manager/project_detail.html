{% extends "base.html" %}

{% block content %}
  <h1>
    About project "{{ project.name }}"
    <a
        href="{% url 'manager:project-update' pk=project.id %}"
        style="float: right; margin: 0;"
        class="btn btn-success"
    >
      Edit
    </a>
  </h1>
  <hr>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Description</th>
        <th>Project Teams</th>
        <th>Project Tasks</th>
        <th>Project Workers</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ project.description }}</td>
        <td>
          {% for team in project.teams.all %}
            <a href="#">{{ team.name }}</a>
          {% endfor %}
        </td>
        <td>
          <ul>
            {% for task in project.tasks.all %}
              <li>
                <a href="#">{{ task.name }}</a>
              </li>
           {% endfor %}
          </ul>
        </td>
        <td>
          <ul>
            {% for team in project.teams.all %}
              {% for worker in team.workers.all %}
                <li>
                  <a href="#">{{ worker.username }}</a>
                  {% if worker.position %}
                    (
                    {% if team %}
                      <strong>{{ team.name }}: </strong>
                    {% else %}
                      <p>Worker is out of team!</p>
                    {% endif %}
                    {% if worker.position %}
                      {{ worker.position }}
                    {% endif %}
                    )
                  {% endif %}
                </li>
              {% endfor %}
            {% endfor %}
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
  <hr>
  <a href="{% url 'manager:project-delete' pk=project.id %}" class="btn btn-danger">Delete</a>
{% endblock %}
