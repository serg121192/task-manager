{% extends "base.html" %}
{% load crispy_forms_filters %}
{% block content %}
  <h1>
    Actual list of Employees:
    <a
        href="{% url 'manager:worker-create' %}"
        class="btn btn-success link-to-page"
    >
      Add new Worker
    </a>
  </h1>
  {% if workers %}
    <form action="" method="get">
      {{ search_form|crispy }}
      <input
          type="submit"
          value="Search"
          class="btn btn-secondary"
      >
    </form>
  {% endif %}
  <hr>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Position</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      {% for worker in workers %}
        <tr>
          <td>{{ worker.id }}</td>
          <td>
            <a
                href="{% url 'manager:worker-detail' pk=worker.id %}"
                class="text-decoration-none"
            >
              {% if user.username == worker.username %}
                {{ worker.username }} (Me)
              {% else %}
                {{ worker.username }}
              {% endif %}
            </a>
          </td>
          <td>{{ worker.first_name }}</td>
          <td>{{ worker.last_name }}</td>
          <td>{{ worker.position }}</td>
          <td>
            <a
                href="{% url 'manager:worker-update' pk=worker.id %}"
                class="btn btn-info"
            >
              Update
            </a>
          </td>
          <td>
            <a
                href="{% url 'manager:worker-delete' pk=worker.id %}"
                class="btn btn-danger"
            >
              Delete
            </a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
